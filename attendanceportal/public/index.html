<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>College Attendance Portal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. MAIN PAGE STYLES (Poppins) --- */
        body { 
            font-family: 'Poppins', sans-serif; 
            margin: 0; 
            overflow-y: auto; overflow-x: hidden;
            min-height: 100vh;
            display: flex; justify-content: center; align-items: center;
            background: #f2f2f7;
            -webkit-overflow-scrolling: touch; 
        }

        #bgCanvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; 
            background: linear-gradient(135deg, #eef2f3 0%, #8e9eab 100%); 
        }

        .container { 
            text-align: center; 
            background: rgba(255, 255, 255, 0.75); 
            backdrop-filter: saturate(180%) blur(20px); 
            -webkit-backdrop-filter: saturate(180%) blur(20px);
            padding: 50px 30px; 
            border-radius: 30px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.1); 
            max-width: 650px; width: 85%; 
            border: 1px solid rgba(255,255,255,0.6);
            margin: 20px 0;
            animation: springUp 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        h1 { 
            color: #1e3c72; margin-bottom: 40px; font-weight: 700; font-size: 2rem; 
            letter-spacing: -0.5px; position: relative; display: inline-block;
        }

        h1::after {
            content: ''; position: absolute; width: 0%; height: 5px; 
            bottom: -10px; left: 50%; transform: translateX(-50%);
            background: linear-gradient(90deg, #1e3c72, #2a5298); 
            border-radius: 10px;
            animation: expandLine 1s cubic-bezier(0.19, 1, 0.22, 1) forwards;
            animation-delay: 0.5s;
        }

        .role-container { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }

        .role-card { 
            cursor: pointer; background: rgba(255, 255, 255, 0.9); 
            padding: 20px 15px; border-radius: 20px; width: 100px; 
            text-align: center; transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border: 1px solid rgba(255,255,255,1);
            position: relative; -webkit-tap-highlight-color: transparent; 
        }

        .role-card svg { width: 45px; height: 45px; fill: #1e3c72; margin-bottom: 12px; transition: fill 0.3s ease; }
        .role-card p { margin: 0; font-weight: 600; color: #1e3c72; font-size: 0.9rem; transition: color 0.3s ease; }

        .role-card:hover { 
            transform: translateY(-10px); background: #1e3c72; 
            box-shadow: 0 20px 40px rgba(30, 60, 114, 0.3); border-color: #1e3c72;
        }
        .role-card:hover svg { fill: #ffffff; }
        .role-card:hover p { color: #ffffff; }
        .role-card:active { transform: scale(0.95); }

        @keyframes springUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes expandLine { to { width: 80px; } }

        /* --- 2. IOS POPUP STYLES (Apple System Font) --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.4); 
            backdrop-filter: blur(4px);   
            display: none; justify-content: center; align-items: center;
            z-index: 2000;
        }

        .ios-popup {
            /* Exact iOS Font Stack */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: rgba(242, 242, 247, 0.95); 
            backdrop-filter: saturate(180%) blur(20px);
            width: 85%; max-width: 300px; 
            padding: 25px;
            border-radius: 20px; 
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            animation: springPop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .ios-popup h3 {
            margin: 0 0 20px 0; color: #000;
            font-weight: 600; font-size: 1.2rem;
        }

        .ios-input {
            width: 100%; padding: 12px; margin-bottom: 12px;
            border: 1px solid #c6c6c8; background: #fff;
            border-radius: 10px; font-size: 16px; box-sizing: border-box; outline: none;
        }
        .ios-input:focus { border-color: #007AFF; }

        .btn-group { display: flex; gap: 10px; margin-top: 10px; }

        .ios-btn {
            flex: 1; padding: 12px; border: none; border-radius: 10px;
            font-size: 16px; font-weight: 600; cursor: pointer;
            font-family: inherit; /* Inherit Apple font */
        }
        .btn-login { background: #007AFF; color: white; }
        .btn-cancel { background: #e5e5ea; color: #000; }

        @keyframes springPop { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body>

<canvas id="bgCanvas"></canvas>

<div class="container">
    <h1>College Portal Login</h1>

    
    <div class="role-container">
        <div class="role-card admin" onclick="openLoginModal('Admin')">
            <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
            <p>Admin</p>
        </div>
        <div class="role-card teacher" onclick="openLoginModal('Teacher')">
            <svg viewBox="0 0 24 24"><path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"/></svg>
            <p>Teacher</p>
        </div>
        <div class="role-card student" onclick="openLoginModal('Student')">
            <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            <p>Student</p>
        </div>
    </div>
</div>

<div class="modal-overlay" id="loginOverlay">
    <div class="ios-popup">
        <h3 id="popupTitle">Login</h3>
        
        <input type="email" id="emailInput" class="ios-input" placeholder="Email Address">
        <input type="password" id="passInput" class="ios-input" placeholder="Password">
        
        <div class="btn-group">
            <button class="ios-btn btn-cancel" onclick="closeLoginModal()">Cancel</button>
            <button class="ios-btn btn-login" onclick="confirmLogin()">Login</button>
        </div>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>

<script src="students.js"></script>
<script src="app.js"></script>

<script>
    // Background Dots Logic
    const canvas = document.getElementById('bgCanvas');
    const ctx = canvas.getContext('2d');
    let particlesArray;

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        init();
    });

    class Particle {
        constructor() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.directionX = (Math.random() * 0.4) - 0.2; 
            this.directionY = (Math.random() * 0.4) - 0.2; 
            this.size = Math.random() * 2.5; 
            this.color = '#1e3c72'; 
        }
        draw() {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
            ctx.fillStyle = this.color;
            ctx.fill();
        }
        update() {
            if (this.x > canvas.width || this.x < 0) this.directionX = -this.directionX;
            if (this.y > canvas.height || this.y < 0) this.directionY = -this.directionY;
            this.x += this.directionX;
            this.y += this.directionY;
            this.draw();
        }
    }

    function init() {
        particlesArray = [];
        let numberOfParticles = (canvas.height * canvas.width) / 10000; 
        for (let i = 0; i < numberOfParticles; i++) {
            particlesArray.push(new Particle());
        }
    }

    function animate() {
        requestAnimationFrame(animate);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        for (let i = 0; i < particlesArray.length; i++) {
            particlesArray[i].update();
        }
        connect();
    }

    function connect() {
        for (let a = 0; a < particlesArray.length; a++) {
            for (let b = a; b < particlesArray.length; b++) {
                let distance = ((particlesArray[a].x - particlesArray[b].x) * (particlesArray[a].x - particlesArray[b].x))
                             + ((particlesArray[a].y - particlesArray[b].y) * (particlesArray[a].y - particlesArray[b].y));
                if (distance < (canvas.width/7) * (canvas.height/7)) {
                    let opacityValue = 1 - (distance / 20000);
                    ctx.strokeStyle = 'rgba(30, 60, 114,' + opacityValue + ')'; 
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.moveTo(particlesArray[a].x, particlesArray[a].y);
                    ctx.lineTo(particlesArray[b].x, particlesArray[b].y);
                    ctx.stroke();
                }
            }
        }
    }
    init();
    animate();
</script>

<script>
    console.log(students); // You can now use the 'students' variable here!
</script>

</body>
</html>